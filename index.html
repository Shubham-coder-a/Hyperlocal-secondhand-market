<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hyperiocal Market ‚Äî Buy &amp; Sell Locally</title>
    <meta name="description" content="Student-built hyperlocal secondhand marketplace using Geolocation." />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <style>
        :root {
            --g900: #064e3b;
            --g700: #047857;
            --g500: #10b981;
            --g400: #34d399;
            --g100: #d1fae5;
            --g50: #ecfdf5;
            --bg: #f0fdf4;
            --surface: #fff;
            --muted: #6b7280;
            --text: #111827;
            --border: #d1fae5;
            --sh: 0 4px 24px rgba(16, 185, 129, .12);
            --r: 16px
        }

        [data-theme=dark] {
            --bg: #0a0f0d;
            --surface: #111b16;
            --text: #ecfdf5;
            --muted: #9ca3af;
            --border: #1a3028;
            --sh: 0 4px 24px rgba(0, 0, 0, .4);
            --g50: #0d2019;
            --g100: #134a30
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            transition: background .35s, color .35s;
            min-height: 100vh
        }

        a {
            text-decoration: none
        }

        ::-webkit-scrollbar {
            width: 6px
        }

        ::-webkit-scrollbar-thumb {
            background: var(--g400);
            border-radius: 99px
        }

        /* NAVBAR */
        .navbar {
            background: var(--g900);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(6, 78, 59, .4)
        }

        .nav-inner {
            max-width: 1280px;
            margin: auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 24px;
            gap: 12px;
            flex-wrap: wrap
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--g400);
            font-size: 1.3rem;
            font-weight: 800
        }

        .brand-icon {
            width: 36px;
            height: 36px;
            background: var(--g500);
            border-radius: 10px;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 1rem
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 9px 18px;
            border-radius: 99px;
            font-size: .875rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all .25s
        }

        .btn-ghost {
            background: rgba(255, 255, 255, .1);
            color: #fff
        }

        .btn-ghost:hover {
            background: rgba(255, 255, 255, .2)
        }

        .btn-sell {
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            color: #fff;
            box-shadow: 0 4px 14px rgba(245, 158, 11, .35)
        }

        .btn-sell:hover {
            transform: translateY(-1px)
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            background: rgba(255, 255, 255, .1);
            color: #fff;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            display: grid;
            place-items: center;
            transition: all .25s
        }

        .btn-icon:hover {
            background: rgba(255, 255, 255, .2)
        }

        /* HERO */
        .hero {
            background: linear-gradient(135deg, var(--g900) 0%, var(--g700) 60%, var(--g500) 100%);
            color: #fff;
            text-align: center;
            padding: 64px 24px 80px;
            position: relative;
            overflow: hidden
        }

        .hero h1 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-weight: 800;
            letter-spacing: -.5px;
            line-height: 1.2;
            position: relative
        }

        .hero h1 span {
            color: var(--g400)
        }

        .hero p {
            margin: 12px auto 0;
            max-width: 560px;
            opacity: .85;
            font-size: 1.05rem;
            position: relative
        }

        .loc-chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 18px;
            background: rgba(255, 255, 255, .15);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, .25);
            border-radius: 99px;
            padding: 8px 20px;
            font-size: .875rem;
            font-weight: 500;
            cursor: pointer;
            transition: background .25s;
            position: relative
        }

        .loc-chip:hover {
            background: rgba(255, 255, 255, .22)
        }

        .loc-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--g400);
            animation: pulse 1.5s infinite
        }

        @keyframes pulse {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(52, 211, 153, .6)
            }

            50% {
                box-shadow: 0 0 0 8px rgba(52, 211, 153, 0)
            }
        }

        /* SEARCH */
        .search-wrap {
            max-width: 900px;
            margin: -28px auto 0;
            padding: 0 24px;
            position: relative;
            z-index: 10
        }

        .search-card {
            background: var(--surface);
            border-radius: var(--r);
            padding: 18px;
            box-shadow: var(--sh);
            border: 1px solid var(--border);
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap
        }

        .search-iw {
            flex: 1;
            min-width: 180px;
            position: relative
        }

        .search-iw i {
            position: absolute;
            left: 13px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--muted)
        }

        .search-input {
            width: 100%;
            padding: 11px 13px 11px 40px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg);
            color: var(--text);
            font-size: .95rem;
            font-family: 'Inter', sans-serif;
            outline: none;
            transition: border .2s
        }

        .search-input:focus {
            border-color: var(--g500)
        }

        .search-input::placeholder {
            color: var(--muted)
        }

        .btn-search {
            background: var(--g500);
            color: #fff;
            border: none;
            padding: 11px 24px;
            border-radius: 12px;
            font-weight: 700;
            font-size: .9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 7px;
            transition: all .25s
        }

        .btn-search:hover {
            background: var(--g700);
            transform: translateY(-1px)
        }

        /* STATS */
        .stats-bar {
            background: var(--surface);
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
            margin-top: 8px
        }

        .stats-inner {
            max-width: 1280px;
            margin: auto;
            display: flex;
            justify-content: space-around;
            text-align: center;
            flex-wrap: wrap;
            gap: 12px
        }

        .stat-val {
            font-size: 1.35rem;
            font-weight: 800;
            color: var(--g500)
        }

        .stat-lbl {
            font-size: .75rem;
            color: var(--muted);
            font-weight: 500
        }

        /* FILTERS */
        .section {
            max-width: 1280px;
            margin: auto;
            padding: 0 24px
        }

        .filters-row {
            display: flex;
            align-items: center;
            gap: 8px;
            overflow-x: auto;
            padding: 24px 0 10px;
            scrollbar-width: none
        }

        .filters-row::-webkit-scrollbar {
            display: none
        }

        .f-label {
            font-weight: 600;
            font-size: .875rem;
            white-space: nowrap;
            color: var(--muted)
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--surface);
            border: 2px solid var(--border);
            color: var(--text);
            padding: 7px 16px;
            border-radius: 99px;
            font-size: .82rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: all .2s
        }

        .pill:hover {
            border-color: var(--g500);
            color: var(--g700)
        }

        .pill.active {
            background: var(--g500);
            border-color: var(--g500);
            color: #fff;
            box-shadow: 0 4px 12px rgba(16, 185, 129, .3)
        }

        /* SECTION HEADER */
        .sec-hdr {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 0 14px;
            flex-wrap: wrap;
            gap: 8px
        }

        .sec-title {
            font-size: 1.2rem;
            font-weight: 700
        }

        .sec-title span {
            color: var(--g500)
        }

        .sort-sel {
            background: var(--surface);
            border: 2px solid var(--border);
            color: var(--text);
            padding: 7px 13px;
            border-radius: 10px;
            font-size: .82rem;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            outline: none
        }

        /* GRID */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap: 18px;
            padding-bottom: 60px
        }

        /* CARD */
        .card {
            background: var(--surface);
            border-radius: var(--r);
            border: 1px solid var(--border);
            overflow: hidden;
            transition: transform .3s, box-shadow .3s;
            display: flex;
            flex-direction: column
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 40px rgba(6, 78, 59, .15)
        }

        .card-img {
            position: relative;
            height: 180px;
            background: var(--g50);
            display: grid;
            place-items: center;
            font-size: 3.5rem;
            overflow: hidden
        }

        .dist-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(6, 78, 59, .85);
            color: var(--g400);
            font-size: .7rem;
            font-weight: 700;
            padding: 3px 9px;
            border-radius: 99px;
            border: 1px solid var(--g500)
        }

        .cat-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255, 255, 255, .9);
            color: var(--g700);
            font-size: .67rem;
            font-weight: 700;
            padding: 3px 9px;
            border-radius: 99px;
            text-transform: uppercase;
            letter-spacing: .4px
        }

        [data-theme=dark] .cat-badge {
            background: rgba(17, 27, 22, .9);
            color: var(--g400)
        }

        .wish-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: #fff;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: grid;
            place-items: center;
            color: #9ca3af;
            font-size: .85rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, .15);
            transition: all .2s
        }

        .wish-btn:hover,
        .wish-btn.on {
            color: #ef4444
        }

        [data-theme=dark] .wish-btn {
            background: var(--g900);
            color: var(--muted)
        }

        .card-body {
            padding: 14px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 7px
        }

        .card-price {
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--g700)
        }

        [data-theme=dark] .card-price {
            color: var(--g400)
        }

        .card-name {
            font-size: .93rem;
            font-weight: 600;
            line-height: 1.3
        }

        .card-loc {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: .76rem;
            color: var(--muted);
            font-weight: 500
        }

        .card-loc i {
            color: var(--g500);
            font-size: .73rem
        }

        .btn-contact {
            margin-top: auto;
            width: 100%;
            background: var(--g50);
            color: var(--g700);
            border: 2px solid var(--g100);
            padding: 9px;
            border-radius: 10px;
            font-size: .83rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all .2s;
            font-family: 'Inter', sans-serif
        }

        .btn-contact:hover {
            background: var(--g500);
            color: #fff;
            border-color: var(--g500)
        }

        [data-theme=dark] .btn-contact {
            background: var(--g900);
            color: var(--g400);
            border-color: var(--g900)
        }

        [data-theme=dark] .btn-contact:hover {
            background: var(--g700);
            color: #fff
        }

        /* EMPTY */
        .empty {
            text-align: center;
            padding: 60px 20px;
            grid-column: 1/-1
        }

        .empty i {
            font-size: 3rem;
            color: var(--g400);
            display: block;
            margin-bottom: 14px
        }

        .empty h3 {
            font-weight: 700;
            margin-bottom: 6px
        }

        .empty p {
            color: var(--muted);
            font-size: .9rem
        }

        /* MODAL */
        .modal-ov {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, .55);
            backdrop-filter: blur(4px);
            z-index: 2000;
            display: none;
            place-items: center;
            padding: 20px
        }

        .modal-ov.open {
            display: grid;
            animation: fadeIn .2s
        }

        @keyframes fadeIn {
            from {
                opacity: 0
            }
        }

        .modal {
            background: var(--surface);
            border-radius: 20px;
            padding: 30px;
            max-width: 440px;
            width: 100%;
            position: relative;
            animation: slideUp .25s ease
        }

        @keyframes slideUp {
            from {
                transform: translateY(24px);
                opacity: 0
            }
        }

        .m-close {
            position: absolute;
            top: 14px;
            right: 14px;
            background: var(--bg);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            color: var(--muted);
            font-size: 1rem;
            display: grid;
            place-items: center
        }

        .m-icon {
            width: 52px;
            height: 52px;
            background: var(--g100);
            border-radius: 14px;
            display: grid;
            place-items: center;
            font-size: 1.5rem;
            margin-bottom: 14px
        }

        .modal h2 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 4px
        }

        .modal .sub {
            color: var(--muted);
            font-size: .85rem;
            margin-bottom: 18px
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 14px;
            margin-bottom: 8px
        }

        .info-row i {
            color: var(--g500);
            font-size: .95rem;
            width: 16px
        }

        .info-lbl {
            font-size: .73rem;
            color: var(--muted);
            font-weight: 500
        }

        .info-val {
            font-weight: 600;
            font-size: .9rem
        }

        .btn-wa {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            margin-top: 14px;
            background: #25D366;
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 13px;
            font-size: .92rem;
            font-weight: 700;
            cursor: pointer;
            transition: all .2s
        }

        .btn-wa:hover {
            background: #128c50;
            transform: translateY(-1px)
        }

        /* FAB */
        .fab {
            display: none;
            position: fixed;
            bottom: 22px;
            right: 22px;
            z-index: 900;
            background: linear-gradient(135deg, #10b981, #047857);
            color: #fff;
            border: none;
            border-radius: 99px;
            padding: 13px 20px;
            font-size: .9rem;
            font-weight: 700;
            box-shadow: 0 8px 24px rgba(16, 185, 129, .45);
            cursor: pointer;
            align-items: center;
            gap: 7px
        }

        @media(max-width:640px) {
            .fab {
                display: flex
            }
        }

        /* FOOTER */
        footer {
            background: var(--g900);
            color: rgba(255, 255, 255, .7);
            text-align: center;
            padding: 22px;
            font-size: .84rem
        }

        footer span {
            color: var(--g400);
            font-weight: 600
        }
    </style>
</head>

<body data-theme="light">

    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="nav-inner">
            <a href="index.html" class="brand">
                <div class="brand-icon"><i class="fa-solid fa-leaf"></i></div>
                Hyperiocal
            </a>
            <div class="nav-actions">
                <button class="btn-icon" onclick="toggleTheme()" id="themeBtn" title="Toggle theme"><i
                        class="fa-solid fa-moon"></i></button>
                <a href="login.html" class="btn btn-ghost"><i class="fa-solid fa-right-to-bracket"></i> Login</a>
                <a href="register.html" class="btn btn-ghost"><i class="fa-solid fa-user-plus"></i> Register</a>
                <a href="add-product.html" class="btn btn-sell"><i class="fa-solid fa-plus"></i> Sell Item</a>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <section class="hero">
        <h1>Your Campus <span>Secondhand</span><br>Marketplace</h1>
        <p>Buy &amp; sell preloved items from students near you. Sustainable. Local. Instant.</p>
        <div class="loc-chip" onclick="retryLoc()">
            <div class="loc-dot"></div>
            <i class="fa-solid fa-location-dot"></i>
            <span id="userLocation">Detecting your location‚Ä¶</span>
        </div>
    </section>

    <!-- SEARCH -->
    <div class="search-wrap">
        <div class="search-card">
            <div class="search-iw">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" id="searchInput" class="search-input" placeholder="Search laptops, books, furniture‚Ä¶"
                    oninput="render()" />
            </div>
            <button class="btn-search" onclick="render()"><i class="fa-solid fa-magnifying-glass"></i> Search</button>
        </div>
    </div>

    <!-- STATS -->
    <div class="stats-bar">
        <div class="stats-inner">
            <div>
                <div class="stat-val">240+</div>
                <div class="stat-lbl">Active Listings</div>
            </div>
            <div>
                <div class="stat-val">18</div>
                <div class="stat-lbl">Campuses Covered</div>
            </div>
            <div>
                <div class="stat-val">4.8‚òÖ</div>
                <div class="stat-lbl">Avg Rating</div>
            </div>
            <div>
                <div class="stat-val">‚Çπ0</div>
                <div class="stat-lbl">Commission Fee</div>
            </div>
        </div>
    </div>

    <!-- FILTERS + GRID -->
    <div class="section">
        <div class="filters-row" id="filterRow">
            <span class="f-label">Filter:</span>
            <button class="pill active" data-cat="all" onclick="setFilter(this)"><i class="fa-solid fa-border-all"></i>
                All</button>
            <button class="pill" data-cat="electronics" onclick="setFilter(this)"><i class="fa-solid fa-laptop"></i>
                Electronics</button>
            <button class="pill" data-cat="furniture" onclick="setFilter(this)"><i class="fa-solid fa-couch"></i>
                Furniture</button>
            <button class="pill" data-cat="books" onclick="setFilter(this)"><i class="fa-solid fa-book"></i>
                Books</button>
            <button class="pill" data-cat="clothing" onclick="setFilter(this)"><i class="fa-solid fa-shirt"></i>
                Clothing</button>
            <button class="pill" data-cat="vehicles" onclick="setFilter(this)"><i class="fa-solid fa-bicycle"></i>
                Vehicles</button>
            <button class="pill" data-cat="sports" onclick="setFilter(this)"><i class="fa-solid fa-dumbbell"></i>
                Sports</button>
        </div>
        <div class="sec-hdr">
            <h2 class="sec-title">Nearby Listings <span id="cnt"></span></h2>
            <select class="sort-sel" id="sortSel" onchange="render()">
                <option value="distance">Sort: Nearest First</option>
                <option value="price-asc">Price: Low ‚Üí High</option>
                <option value="price-desc">Price: High ‚Üí Low</option>
                <option value="newest">Newest First</option>
            </select>
        </div>
        <div class="grid" id="grid"></div>
    </div>

    <footer>¬© 2026 <span>Hyperiocal Market</span> ¬∑ Built with üíö by Shubham ¬∑ Sustainable Local Commerce</footer>
    <button class="fab" onclick="location.href='add-product.html'"><i class="fa-solid fa-plus"></i> Sell Item</button>

    <!-- CONTACT MODAL -->
    <div class="modal-ov" id="modal" onclick="closeModal(event)">
        <div class="modal">
            <button class="m-close" onclick="closeModalDirect()"><i class="fa-solid fa-xmark"></i></button>
            <div class="m-icon">üìû</div>
            <h2 id="mName">Product</h2>
            <p class="sub">Contact the seller for more details</p>
            <div class="info-row"><i class="fa-solid fa-user"></i>
                <div>
                    <div class="info-lbl">Seller</div>
                    <div class="info-val" id="mSeller"></div>
                </div>
            </div>
            <div class="info-row"><i class="fa-solid fa-phone"></i>
                <div>
                    <div class="info-lbl">Phone</div>
                    <div class="info-val" id="mPhone"></div>
                </div>
            </div>
            <div class="info-row"><i class="fa-solid fa-location-dot"></i>
                <div>
                    <div class="info-lbl">Location</div>
                    <div class="info-val" id="mLoc"></div>
                </div>
            </div>
            <div class="info-row"><i class="fa-solid fa-tag"></i>
                <div>
                    <div class="info-lbl">Price</div>
                    <div class="info-val" id="mPrice"></div>
                </div>
            </div>
            <button class="btn-wa" id="waBtn"><i class="fa-brands fa-whatsapp"></i> Chat on WhatsApp</button>
        </div>
    </div>

    <script>
        const products = [
            { id: 1, name: "Dell Inspiron 15 Laptop", cat: "electronics", emoji: "üíª", price: 18500, dist: 0.4, loc: "Waluj, Sambhajinagar", seller: "Rahul S.", phone: "9876543210", date: 5 },
            { id: 2, name: "Gaming Laptop RTX 3060", cat: "electronics", emoji: "üéÆ", price: 42000, dist: 1.1, loc: "MGMU Campus", seller: "Aryan K.", phone: "9123456780", date: 2 },
            { id: 3, name: "Comfortable Office Chair", cat: "furniture", emoji: "ü™ë", price: 3200, dist: 0.8, loc: "Cidco Colony", seller: "Priya M.", phone: "9988776655", date: 8 },
            { id: 4, name: "Study Table with Shelf", cat: "furniture", emoji: "ü™µ", price: 4500, dist: 2.3, loc: "Aurangabad Satara", seller: "Sneha R.", phone: "9112233445", date: 1 },
            { id: 5, name: "Mountain Bicycle 21-Speed", cat: "vehicles", emoji: "üö≤", price: 8000, dist: 1.5, loc: "Garkheda", seller: "Raj T.", phone: "9012345678", date: 6 },
            { id: 6, name: "Honda Activa 5G Scooty", cat: "vehicles", emoji: "üõµ", price: 52000, dist: 3.2, loc: "Bajajnagar", seller: "Vikram P.", phone: "9765432100", date: 3 },
            { id: 7, name: "iPhone 12 128GB", cat: "electronics", emoji: "üì±", price: 31000, dist: 0.6, loc: "Chhatrapati Sq.", seller: "Nisha G.", phone: "9654321098", date: 7 },
            { id: 8, name: "Samsung 43\" Smart TV", cat: "electronics", emoji: "üì∫", price: 22000, dist: 4.1, loc: "Osmanpura", seller: "Karan J.", phone: "9543210987", date: 9 },
            { id: 9, name: "JEE Advanced Books Set", cat: "books", emoji: "üìö", price: 1200, dist: 0.3, loc: "MIT College", seller: "Anil B.", phone: "9432109876", date: 4 },
            { id: 10, name: "Air Cooler Bajaj 36L", cat: "electronics", emoji: "‚ùÑÔ∏è", price: 5500, dist: 2.8, loc: "Waluj Estate", seller: "Deepa N.", phone: "9321098765", date: 10 },
            { id: 11, name: "Cricket Bat + Pads Set", cat: "sports", emoji: "üèè", price: 2400, dist: 1.9, loc: "Krida Mandal", seller: "Suresh V.", phone: "9210987654", date: 11 },
            { id: 12, name: "Bluetooth Speaker JBL", cat: "electronics", emoji: "üîä", price: 3800, dist: 0.9, loc: "College Road", seller: "Pooja L.", phone: "9109876543", date: 12 },
            { id: 13, name: "Engineering Drawing Set", cat: "books", emoji: "üìê", price: 800, dist: 0.2, loc: "COEP Hostel", seller: "Mohit C.", phone: "9876512340", date: 13 },
            { id: 14, name: "Yoga Mat + Resistance Band", cat: "sports", emoji: "üßò", price: 950, dist: 1.3, loc: "Samarth Colony", seller: "Rina S.", phone: "9765423110", date: 14 },
            { id: 15, name: "Denim Jacket (Size L)", cat: "clothing", emoji: "üß•", price: 600, dist: 0.7, loc: "Prozone Mall Area", seller: "Tara F.", phone: "9654332200", date: 15 },
            { id: 16, name: "Wooden Bed Teak Queen", cat: "furniture", emoji: "üõèÔ∏è", price: 12000, dist: 5.0, loc: "Beed Bypass", seller: "Ajay H.", phone: "9543221100", date: 16 },
        ];

        let activeCat = "all", wishlist = new Set();

        function toggleTheme() {
            const b = document.body, dark = b.getAttribute("data-theme") === "dark";
            b.setAttribute("data-theme", dark ? "light" : "dark");
            document.getElementById("themeBtn").innerHTML = dark ? '<i class="fa-solid fa-moon"></i>' : '<i class="fa-solid fa-sun"></i>';
        }

        function retryLoc() { document.getElementById("userLocation").textContent = "Detecting‚Ä¶"; getLoc(); }
        function getLoc() {
            if (!navigator.geolocation) { document.getElementById("userLocation").textContent = "üìç Sambhajinagar, MH"; return; }
            navigator.geolocation.getCurrentPosition(
                p => document.getElementById("userLocation").textContent = `Lat ${p.coords.latitude.toFixed(4)}, Lon ${p.coords.longitude.toFixed(4)} ‚Äî Active`,
                () => document.getElementById("userLocation").textContent = "üìç Sambhajinagar, Maharashtra"
            );
        }
        getLoc();

        function setFilter(el) {
            document.querySelectorAll(".pill").forEach(p => p.classList.remove("active"));
            el.classList.add("active"); activeCat = el.getAttribute("data-cat"); render();
        }

        function render() {
            const q = document.getElementById("searchInput").value.toLowerCase();
            const s = document.getElementById("sortSel").value;
            let list = products.filter(p => {
                const catOk = activeCat === "all" || p.cat === activeCat;
                const txtOk = !q || p.name.toLowerCase().includes(q) || p.cat.includes(q);
                return catOk && txtOk;
            });
            if (s === "price-asc") list.sort((a, b) => a.price - b.price);
            if (s === "price-desc") list.sort((a, b) => b.price - a.price);
            if (s === "distance") list.sort((a, b) => a.dist - b.dist);
            if (s === "newest") list.sort((a, b) => a.date - b.date);
            document.getElementById("cnt").textContent = `(${list.length})`;
            const g = document.getElementById("grid");
            if (!list.length) {
                g.innerHTML = '<div class="empty"><i class="fa-solid fa-box-open"></i><h3>No listings found</h3><p>Try a different search or category.</p></div>'; return;
            }
            g.innerHTML = list.map(p => `
    <div class="card">
      <div class="card-img">
        ${p.emoji}
        <span class="dist-badge"><i class="fa-solid fa-location-dot"></i> ${p.dist} km</span>
        <span class="cat-badge">${p.cat}</span>
        <button class="wish-btn ${wishlist.has(p.id) ? "on" : ""}" onclick="toggleWish(event,${p.id})"><i class="fa-${wishlist.has(p.id) ? "solid" : "regular"} fa-heart"></i></button>
      </div>
      <div class="card-body">
        <div class="card-price">‚Çπ${p.price.toLocaleString("en-IN")}</div>
        <div class="card-name">${p.name}</div>
        <div class="card-loc"><i class="fa-solid fa-location-dot"></i> ${p.loc}</div>
        <button class="btn-contact" onclick="openModal(${p.id})"><i class="fa-solid fa-phone"></i> Contact Seller</button>
      </div>
    </div>`).join("");
        }

        function toggleWish(e, id) { e.stopPropagation(); wishlist.has(id) ? wishlist.delete(id) : wishlist.add(id); render(); }

        function openModal(id) {
            const p = products.find(x => x.id === id);
            document.getElementById("mName").textContent = p.name;
            document.getElementById("mSeller").textContent = p.seller;
            document.getElementById("mPhone").textContent = p.phone;
            document.getElementById("mLoc").textContent = p.loc;
            document.getElementById("mPrice").textContent = "‚Çπ" + p.price.toLocaleString("en-IN");
            document.getElementById("waBtn").onclick = () => window.open(`https://wa.me/91${p.phone}?text=Hi, I'm interested in your "${p.name}" listed on Hyperiocal.`, "_blank");
            document.getElementById("modal").classList.add("open");
            document.body.style.overflow = "hidden";
        }
        function closeModal(e) { if (e.target === document.getElementById("modal")) closeModalDirect(); }
        function closeModalDirect() { document.getElementById("modal").classList.remove("open"); document.body.style.overflow = ""; }
        document.addEventListener("keydown", e => { if (e.key === "Escape") closeModalDirect(); });
        render();
    </script>
</body>

</html>